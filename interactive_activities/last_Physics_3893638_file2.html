<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  html,body{margin:0;height:100%;background:#bfe8ff;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  svg{display:block;width:100%;height:100%}
  #selector, #ball {cursor:pointer}
  .flash {transition:fill 150ms ease}
  .pressed {transform:scale(0.98);transition:transform 120ms}
</style>
</head>
<body>
<svg id="simulation-canvas" viewBox="0 0 768 768" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="drop" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="14" stdDeviation="8" flood-color="#000" flood-opacity="0.28"/>
    </filter>
  </defs>

  <rect x="0" y="0" width="768" height="768" fill="#bfe8ff"/>

  <g id="selector" transform="translate(0,0)">
    <rect id="sel-bg" class="flash" x="244" y="48" width="280" height="84" rx="26" fill="#ffffff"/>
    <text x="384" y="102" text-anchor="middle" font-size="40" font-weight="700" fill="#1e1e1e">Earth</text>
    <path d="M 482 86 l 16 16 l 16 -16" fill="none" stroke="#1e1e1e" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
  </g>

  <g id="gravity-display">
    <text id="g-text" x="384" y="200" text-anchor="middle" font-size="64" font-weight="700" fill="#3a3a3a">
      <tspan id="g-main">9.8 m/s</tspan><tspan id="g-sup" font-size="44" dy="-20">2</tspan>
    </text>
  </g>

  <g id="ball" transform="translate(0,0)">
    <circle id="ballCirc" cx="384" cy="560" r="78" fill="#ff8a00" filter="url(#drop)"/>
  </g>

  <g id="hand" transform="translate(450,620)" style="pointer-events:none">
    <path d="M64 92
             c-10 -6 -17 -5 -24 0
             c-7 5 -10 16 -10 24
             c0 18 14 34 33 40
             c21 7 41 -1 54 -15
             l30 -34
             c7 -8 5 -20 -4 -26
             c-7 -4 -16 -2 -21 4
             l-11 13
             v-36
             c0 -10 -8 -18 -18 -18
             s-18 8 -18 18
             v28
             l-8 -6
             c-9 -7 -20 -5 -27 3
             c-7 8 -6 20 2 26
             l12 10
             " fill="#ffffff" stroke="#0f0f0f" stroke-width="8" stroke-linejoin="round" stroke-linecap="round"/>
    <circle cx="78" cy="60" r="12" fill="#ffffff" stroke="#0f0f0f" stroke-width="8"/>
  </g>

  <script>
    const svg = document.getElementById('simulation-canvas');
    const selector = document.getElementById('selector');
    const selBg = document.getElementById('sel-bg');
    const gMain = document.getElementById('g-main');
    const gSup = document.getElementById('g-sup');
    const ball = document.getElementById('ball');
    const ballCirc = document.getElementById('ballCirc');

    const planets = [
      {name:'Mercury', g:3.7},
      {name:'Moon', g:1.6},
      {name:'Mars', g:3.7},
      {name:'Earth', g:9.8},
      {name:'Jupiter', g:24.8}
    ];

    let currentIndex = planets.findIndex(p=>p.name==='Earth');
    let currentGravity = planets[currentIndex].g;

    const radius = 78;
    const startX = 384;
    const startY = 560;
    const groundY = 720; // invisible ground plane
    let y = startY;
    let v = 0;
    let running = false;
    let lastT = null;

    function updateTexts(){
      selector.querySelector('text').textContent = planets[currentIndex].name;
      currentGravity = planets[currentIndex].g;
      const gv = Math.round(currentGravity*10)/10;
      gMain.textContent = gv+' m/s';
      gSup.textContent = '2';
    }
    updateTexts();

    function flashSelector(){
      selBg.setAttribute('fill', '#eef3ff');
      setTimeout(()=>selBg.setAttribute('fill','#ffffff'),130);
    }

    selector.addEventListener('pointerdown', ()=>{
      if(running) return;
      currentIndex = (currentIndex + 1) % planets.length;
      updateTexts();
      flashSelector();
    });

    function resetBall(){
      running = false;
      lastT = null;
      v = 0;
      y = startY;
      ballCirc.setAttribute('cy', y);
      ball.classList.remove('pressed');
    }

    function animate(ts){
      if(!running){ return; }
      if(lastT==null){ lastT = ts; requestAnimationFrame(animate); return; }
      const dt = Math.min(0.032,(ts - lastT)/1000);
      lastT = ts;

      const gpx = currentGravity * 50;
      v += gpx * dt;
      y += v * dt;

      if(y + radius >= groundY){
        y = groundY - radius;
        if(Math.abs(v) > 120){
          v = -v * 0.45;
        }else{
          setTimeout(resetBall, 500);
          running = false;
        }
      }

      ballCirc.setAttribute('cy', y);
      if(running) requestAnimationFrame(animate);
    }

    ball.addEventListener('pointerdown', ()=>{
      if(running) return;
      running = true;
      ball.classList.add('pressed');
      requestAnimationFrame(animate);
    });

    window.addEventListener('resize', ()=>{}); // keep pointer support consistent
  </script>
</svg>
</body>
</html>