<html>
<head>
<style>
html, body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at top, #050816 0%, #020617 40%, #020617 100%);
  height: 100%;
  width: 100%;
}
body {
  display: flex;
  justify-content: center;
  align-items: center;
}
svg {
  width: min(100vw, 100vh);
  height: min(100vw, 100vh);
  touch-action: none;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
}
</style>
</head>
<body>
<svg viewBox="0 0 800 800">
  <defs>
    <linearGradient id="bgGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#020617"/>
      <stop offset="100%" stop-color="#050816"/>
    </linearGradient>
    <linearGradient id="cardGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#050b18"/>
      <stop offset="100%" stop-color="#0b1120"/>
    </linearGradient>
    <radialGradient id="planet1Grad" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#1e293b"/>
      <stop offset="100%" stop-color="#020617"/>
    </radialGradient>
    <radialGradient id="planet2Grad" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#4c1d95"/>
      <stop offset="100%" stop-color="#1e1b4b"/>
    </radialGradient>
    <radialGradient id="planet3Grad" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#0f766e"/>
      <stop offset="100%" stop-color="#022c22"/>
    </radialGradient>
    <radialGradient id="planet4Grad" cx="30%" cy="30%" r="70%">
      <stop offset="0%" stop-color="#f97316"/>
      <stop offset="100%" stop-color="#7c2d12"/>
    </radialGradient>
    <linearGradient id="buttonGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ff4b9a"/>
      <stop offset="100%" stop-color="#4f46e5"/>
    </linearGradient>
  </defs>

  <rect x="0" y="0" width="800" height="800" fill="url(#bgGrad)"/>

  <g id="mainCard">
    <rect x="60" y="60" width="680" height="680" rx="28" fill="url(#cardGrad)" stroke="rgba(148,163,184,0.35)" stroke-width="1.2"/>
    
    <rect x="80" y="80" width="160" height="28" rx="14" fill="#020617" stroke="rgba(148,163,184,0.35)" stroke-width="0.8"/>
    <text x="92" y="99" fill="#9ca3af" font-size="11" letter-spacing="0.18em" textRendering="geometricPrecision">GRAVITY MINI-LAB</text>
    
    <text x="80" y="138" fill="#f9fafb" font-size="26" font-weight="600">Planet Hopper</text>
    <text x="80" y="170" fill="#9ca3af" font-size="14">
      <tspan x="80" dy="0">Drag the object to a planet, then press</tspan>
      <tspan x="80" dy="20">“Drop Object” to see how gravity changes its fall.</tspan>
    </text>

    <rect x="80" y="210" width="640" height="1" fill="rgba(148,163,184,0.25)"/>

    <g id="leftPanel">
      <rect x="80" y="230" width="320" height="230" rx="20" fill="#020617" stroke="rgba(148,163,184,0.25)" stroke-width="1"/>
      <text x="100" y="260" fill="#e5e7eb" font-size="16" font-weight="500">1. Choose a planet</text>
      <text x="100" y="285" fill="#9ca3af" font-size="13">
        <tspan x="100" dy="0">Each planet has a different gravitational</tspan>
        <tspan x="100" dy="18">pull. Stronger gravity = faster fall.</tspan>
      </text>

      <g id="planetZones">
        <g id="planet1" data-planet="Moon">
          <circle cx="130" cy="360" r="46" fill="url(#planet1Grad)" stroke="rgba(148,163,184,0.4)" stroke-width="2"/>
          <circle cx="115" cy="345" r="6" fill="#111827"/>
          <circle cx="145" cy="372" r="9" fill="#111827"/>
          <text x="130" y="418" fill="#e5e7eb" font-size="12" text-anchor="middle">MOON</text>
          <text x="130" y="435" fill="#6b7280" font-size="11" text-anchor="middle">Weak</text>
        </g>

        <g id="planet2" data-planet="Earth">
          <circle cx="230" cy="340" r="50" fill="url(#planet2Grad)" stroke="rgba(96,165,250,0.7)" stroke-width="2"/>
          <path d="M200 335 Q230 310 260 332" fill="none" stroke="#6366f1" stroke-width="3" stroke-linecap="round"/>
          <path d="M205 355 Q230 380 255 360" fill="none" stroke="#818cf8" stroke-width="3" stroke-linecap="round"/>
          <text x="230" y="408" fill="#e5e7eb" font-size="12" text-anchor="middle">EARTH</text>
          <text x="230" y="425" fill="#6b7280" font-size="11" text-anchor="middle">Medium</text>
        </g>

        <g id="planet3" data-planet="Jupiter">
          <circle cx="310" cy="375" r="40" fill="url(#planet3Grad)" stroke="rgba(16,185,129,0.7)" stroke-width="2"/>
          <path d="M280 365 Q310 350 340 362" fill="none" stroke="#22c55e" stroke-width="3" stroke-linecap="round"/>
          <path d="M282 385 Q310 400 338 388" fill="none" stroke="#16a34a" stroke-width="3" stroke-linecap="round"/>
          <text x="310" y="428" fill="#e5e7eb" font-size="12" text-anchor="middle">JUPITER</text>
          <text x="310" y="445" fill="#6b7280" font-size="11" text-anchor="middle">Strong</text>
        </g>
      </g>
    </g>

    <g id="rightPanel">
      <rect x="80" y="480" width="320" height="240" rx="20" fill="#020617" stroke="rgba(148,163,184,0.25)" stroke-width="1"/>
      <text x="100" y="510" fill="#e5e7eb" font-size="16" font-weight="500">2. Watch it fall</text>
      <text x="100" y="535" fill="#9ca3af" font-size="13">
        <tspan x="100" dy="0">Drop the object from the same height.</tspan>
        <tspan x="100" dy="18">Compare how long it takes to land.</tspan>
      </text>

      <rect x="100" y="570" width="80" height="6" rx="3" fill="#111827"/>
      <rect id="speedMoon" x="100" y="570" width="28" height="6" rx="3" fill="#f97316" opacity="0.4"/>

      <rect x="100" y="590" width="80" height="6" rx="3" fill="#111827"/>
      <rect id="speedEarth" x="100" y="590" width="48" height="6" rx="3" fill="#38bdf8" opacity="0.4"/>

      <rect x="100" y="610" width="80" height="6" rx="3" fill="#111827"/>
      <rect id="speedJupiter" x="100" y="610" width="72" height="6" rx="3" fill="#22c55e" opacity="0.4"/>

      <text x="190" y="575" fill="#6b7280" font-size="11">Moon speed</text>
      <text x="190" y="595" fill="#6b7280" font-size="11">Earth speed</text>
      <text x="190" y="615" fill="#6b7280" font-size="11">Jupiter speed</text>

      <text id="selectedPlanetLabel" x="100" y="645" fill="#e5e7eb" font-size="13">Selected planet: —</text>
      <text id="timeLabel" x="100" y="667" fill="#9ca3af" font-size="13">Fall time: — s</text>
    </g>

    <g id="simPanel">
      <rect x="420" y="230" width="300" height="490" rx="24" fill="#020617" stroke="rgba(148,163,184,0.35)" stroke-width="1.1"/>

      <text x="440" y="262" fill="#e5e7eb" font-size="16" font-weight="500">Drop zone</text>
      <text x="440" y="284" fill="#9ca3af" font-size="12">Drag the object onto a planet, then drop it.</text>

      <g id="skyArea">
        <rect x="440" y="300" width="260" height="300" rx="18" fill="#020617" stroke="rgba(148,163,184,0.25)" stroke-width="1" stroke-dasharray="4 4" stroke-linecap="round"/>

        <g id="planetTargetMoon" data-planet="Moon">
          <circle cx="485" cy="405" r="40" fill="url(#planet1Grad)" stroke="rgba(148,163,184,0.4)" stroke-width="2"/>
          <text x="485" y="462" fill="#9ca3af" font-size="11" text-anchor="middle">MOON</text>
        </g>

        <g id="planetTargetEarth" data-planet="Earth">
          <circle cx="570" cy="380" r="46" fill="url(#planet2Grad)" stroke="rgba(96,165,250,0.7)" stroke-width="2"/>
          <text x="570" y="448" fill="#9ca3af" font-size="11" text-anchor="middle">EARTH</text>
        </g>

        <g id="planetTargetJupiter" data-planet="Jupiter">
          <circle cx="645" cy="430" r="42" fill="url(#planet3Grad)" stroke="rgba(16,185,129,0.7)" stroke-width="2"/>
          <text x="645" y="492" fill="#9ca3af" font-size="11" text-anchor="middle">JUPITER</text>
        </g>

        <rect x="452" y="520" width="236" height="8" rx="4" fill="#0f172a"/>

        <g id="fallObject" cursor="pointer">
          <circle id="fallBall" cx="570" cy="330" r="16" fill="#ff4b9a" stroke="#f9a8d4" stroke-width="2"/>
          <path id="fallHighlight" d="M562 323 Q570 318 578 323" fill="none" stroke="#fdf2f8" stroke-width="2" stroke-linecap="round" opacity="0.85"/>
        </g>

        <g id="ghostStart">
          <circle cx="570" cy="330" r="16" fill="none" stroke="rgba(148,163,184,0.25)" stroke-width="1.2" stroke-dasharray="3 3"/>
        </g>
      </g>

      <g id="controls">
        <g id="dropButton" cursor="pointer">
          <rect x="440" y="620" width="180" height="44" rx="22" fill="url(#buttonGrad)" stroke="rgba(248,250,252,0.5)" stroke-width="0.8"/>
          <text x="530" y="647" text-anchor="middle" fill="#f9fafb" font-size="15" font-weight="600">Drop Object</text>
        </g>

        <g id="resetButton" cursor="pointer">
          <rect x="634" y="620" width="66" height="44" rx="18" fill="#020617" stroke="rgba(148,163,184,0.6)" stroke-width="1"/>
          <path d="M660 634 A9 9 0 1 1 651 646" fill="none" stroke="#e5e7eb" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M651 634 L647 630" fill="none" stroke="#e5e7eb" stroke-width="1.5" stroke-linecap="round"/>
        </g>

        <text id="statusText" x="440" y="688" fill="#9ca3af" font-size="13">Drag the object onto a planet to begin.</text>
      </g>
    </g>
  </g>
</svg>

<script>
const svg = document.querySelector('svg');
const fallObject = document.getElementById('fallObject');
const fallBall = document.getElementById('fallBall');
const dropButton = document.getElementById('dropButton');
const resetButton = document.getElementById('resetButton');
const statusText = document.getElementById('statusText');
const selectedPlanetLabel = document.getElementById('selectedPlanetLabel');
const timeLabel = document.getElementById('timeLabel');

const planetTargets = [
  document.getElementById('planetTargetMoon'),
  document.getElementById('planetTargetEarth'),
  document.getElementById('planetTargetJupiter')
];

const speeds = {
  Moon: {time: 3.0, bar: document.getElementById('speedMoon')},
  Earth: {time: 2.0, bar: document.getElementById('speedEarth')},
  Jupiter: {time: 1.0, bar: document.getElementById('speedJupiter')}
};

let startPos = {x: 570, y: 330};
let dragOffset = {x: 0, y: 0};
let isDragging = false;
let currentPlanet = null;
let animationFrame = null;
let isFalling = false;

function getMousePosition(evt) {
  const pt = svg.createSVGPoint();
  pt.x = evt.clientX;
  pt.y = evt.clientY;
  const res = pt.matrixTransform(svg.getScreenCTM().inverse());
  return {x: res.x, y: res.y};
}

function setBallPosition(x, y) {
  fallBall.setAttribute('cx', x);
  fallBall.setAttribute('cy', y);
  document.getElementById('fallHighlight').setAttribute('d', `M${x-8} ${y-7} Q${x} ${y-12} ${x+8} ${y-7}`);
}

function hitTestPlanet(x, y) {
  for (const p of planetTargets) {
    const circle = p.querySelector('circle');
    const cx = parseFloat(circle.getAttribute('cx'));
    const cy = parseFloat(circle.getAttribute('cy'));
    const r = parseFloat(circle.getAttribute('r')) + 12;
    const dx = x - cx;
    const dy = y - cy;
    if (dx*dx + dy*dy <= r*r) return p;
  }
  return null;
}

function clearBars() {
  Object.values(speeds).forEach(({bar}) => bar.setAttribute('opacity', '0.4'));
}

function highlightPlanetTarget(planetName) {
  planetTargets.forEach(p => {
    const c = p.querySelector('circle');
    if (p.dataset.planet === planetName) {
      c.setAttribute('stroke-width', '3');
      c.setAttribute('opacity', '1');
    } else {
      c.setAttribute('stroke-width', '2');
      c.setAttribute('opacity', '0.6');
    }
  });
}

function resetPlanetHighlights() {
  planetTargets.forEach(p => {
    const c = p.querySelector('circle');
    c.setAttribute('stroke-width', '2');
    c.setAttribute('opacity', '1');
  });
}

function setStatus(text, color="#9ca3af") {
  statusText.textContent = text;
  statusText.setAttribute('fill', color);
}

function resetFall() {
  if (animationFrame) cancelAnimationFrame(animationFrame);
  isFalling = false;
  currentPlanet = null;
  setBallPosition(startPos.x, startPos.y);
  clearBars();
  resetPlanetHighlights();
  selectedPlanetLabel.textContent = "Selected planet: —";
  timeLabel.textContent = "Fall time: — s";
  setStatus("Drag the object onto a planet to begin.");
  dropButton.querySelector('rect').setAttribute('opacity','1');
}

fallObject.addEventListener('pointerdown', (e) => {
  if (isFalling) return;
  isDragging = true;
  svg.setPointerCapture(e.pointerId);
  const pos = getMousePosition(e);
  const cx = parseFloat(fallBall.getAttribute('cx'));
  const cy = parseFloat(fallBall.getAttribute('cy'));
  dragOffset.x = pos.x - cx;
  dragOffset.y = pos.y - cy;
  fallObject.setAttribute('transform', 'scale(1.05)');
  fallBall.setAttribute('opacity', '0.95');
});

svg.addEventListener('pointermove', (e) => {
  if (!isDragging || isFalling) return;
  const pos = getMousePosition(e);
  const x = pos.x - dragOffset.x;
  const y = pos.y - dragOffset.y;
  setBallPosition(x, y);

  const target = hitTestPlanet(x, y);
  if (target) {
    target.querySelector('circle').setAttribute('opacity', '1');
  } else {
    resetPlanetHighlights();
  }
});

svg.addEventListener('pointerup', (e) => {
  if (!isDragging) return;
  isDragging = false;
  svg.releasePointerCapture(e.pointerId);
  fallObject.removeAttribute('transform');
  fallBall.setAttribute('opacity', '1');

  const pos = getMousePosition(e);
  const target = hitTestPlanet(pos.x - dragOffset.x, pos.y - dragOffset.y);
  if (target) {
    currentPlanet = target.dataset.planet;
    const circle = target.querySelector('circle');
    const cx = parseFloat(circle.getAttribute('cx'));
    const cy = parseFloat(circle.getAttribute('cy')) - (parseFloat(circle.getAttribute('r')) + 26);
    setBallPosition(cx, cy);
    highlightPlanetTarget(currentPlanet);
    selectedPlanetLabel.textContent = "Selected planet: " + currentPlanet;
    clearBars();
    speeds[currentPlanet].bar.setAttribute('opacity','1');
    setStatus("Press “Drop Object” to see it fall.", "#e5e7eb");
  } else {
    setBallPosition(startPos.x, startPos.y);
    resetPlanetHighlights();
    currentPlanet = null;
    selectedPlanetLabel.textContent = "Selected planet: —";
    clearBars();
    setStatus("Place the object on a planet to run the lab.");
  }
});

dropButton.addEventListener('pointerdown', () => {
  if (!currentPlanet || isFalling) return;
  const btnRect = dropButton.querySelector('rect');
  btnRect.setAttribute('transform','translate(0,1)');
  btnRect.setAttribute('opacity','0.9');
});

dropButton.addEventListener('pointerup', () => {
  const btnRect = dropButton.querySelector('rect');
  btnRect.removeAttribute('transform');
  btnRect.setAttribute('opacity','1');
  if (!currentPlanet || isFalling) return;
  runFallAnimation();
});

function runFallAnimation() {
  isFalling = true;
  const info = speeds[currentPlanet];
  const duration = info.time * 1000;
  const startY = parseFloat(fallBall.getAttribute('cy'));
  const endY = 520;
  const startTime = performance.now();
  setStatus("Falling on " + currentPlanet + "...", "#e5e7eb");
  timeLabel.textContent = "Fall time: " + info.time.toFixed(1) + " s";

  function animate(now) {
    const elapsed = now - startTime;
    const t = Math.min(elapsed / duration, 1);
    const eased = t*t;
    const y = startY + (endY - startY) * eased;
    const cx = parseFloat(fallBall.getAttribute('cx'));
    setBallPosition(cx, y);

    const scale = 1 + 0.04 * (1 - t);
    fallObject.setAttribute('transform', `scale(${scale})`);

    if (t < 1) {
      animationFrame = requestAnimationFrame(animate);
    } else {
      isFalling = false;
      fallObject.removeAttribute('transform');
      setStatus("It landed! Try a different planet to compare.", "#22c55e");
    }
  }
  animationFrame = requestAnimationFrame(animate);
}

resetButton.addEventListener('pointerdown', () => {
  const r = resetButton.querySelector('rect');
  r.setAttribute('transform','translate(0,1)');
  r.setAttribute('opacity','0.9');
});

resetButton.addEventListener('pointerup', () => {
  const r = resetButton.querySelector('rect');
  r.removeAttribute('transform');
  r.setAttribute('opacity','1');
  resetFall();
});

resetFall();
</script>
</body>
</html>