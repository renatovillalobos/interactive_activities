<html>
<head>
<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #000;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
  }
  svg {
    display: block;
    width: 100vmin;
    height: 100vmin;
    margin: 0 auto;
    touch-action: none;
    user-select: none;
  }
  .title {
    fill: #f9fafb;
    font-size: 28px;
    font-weight: 600;
    letter-spacing: 0.2px;
  }
  .subtitle {
    fill: #9ca3af;
    font-size: 14px;
    letter-spacing: 0.04em;
  }
  .helper {
    fill: #9ca3af;
    font-size: 14px;
    letter-spacing: 0.01em;
  }
  .card {
    fill: url(#cardGrad);
    stroke: rgba(148, 163, 184, 0.18);
    stroke-width: 1;
  }
  .zone {
    fill: #0b1120;
    stroke: rgba(148,163,184,0.25);
    stroke-width: 1.5;
    transition: stroke 160ms ease, filter 160ms ease;
  }
  .zone.active {
    stroke: #3b82f6;
    filter: drop-shadow(0 0 0.6px rgba(59,130,246,0.8));
  }
  .zone.correctFlash {
    stroke: #22c55e !important;
  }
  .zone-label {
    fill: #9ca3af;
    font-size: 12px;
    letter-spacing: 0.16em;
    font-weight: 600;
  }
  .draggable {
    cursor: grab;
    transition: transform 180ms ease, filter 180ms ease, opacity 180ms ease;
    filter: drop-shadow(0 2px 8px rgba(0,0,0,0.45));
  }
  .draggable:hover {
    filter: drop-shadow(0 4px 14px rgba(255, 75, 154, 0.25));
  }
  .dragging {
    cursor: grabbing;
    filter: drop-shadow(0 8px 18px rgba(59,130,246,0.35));
  }
  .locked {
    cursor: default;
    filter: drop-shadow(0 4px 14px rgba(34,197,94,0.35));
  }
  .goodStroke {
    stroke: #22c55e !important;
  }
  .badFlash {
    animation: shake 260ms ease;
  }
  @keyframes shake {
    0% { transform: translate(var(--x,0), var(--y,0)); }
    25% { transform: translate(calc(var(--x,0) - 6), var(--y,0)); }
    50% { transform: translate(calc(var(--x,0) + 5), var(--y,0)); }
    75% { transform: translate(calc(var(--x,0) - 4), var(--y,0)); }
    100% { transform: translate(var(--x,0), var(--y,0)); }
  }
  .btn {
    transition: transform 120ms ease, filter 120ms ease;
  }
  .btn rect {
    fill: #ff4b9a;
    stroke: rgba(255,255,255,0.16);
  }
  .btn text {
    fill: #fff;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 0.06em;
  }
  .btn:hover rect {
    filter: drop-shadow(0 6px 14px rgba(255,75,154,0.45));
  }
  .btn:active {
    transform: translateY(1px);
  }
  .hint {
    fill: #9ca3af;
    font-size: 12px;
  }
</style>
</head>
<body>
<svg viewBox="0 0 900 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bgGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#020617"/>
      <stop offset="100%" stop-color="#050816"/>
    </linearGradient>
    <linearGradient id="cardGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#0b1120"/>
      <stop offset="100%" stop-color="#050b18"/>
    </linearGradient>
    <linearGradient id="coinGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#cbd5e1"/>
      <stop offset="100%" stop-color="#94a3b8"/>
    </linearGradient>
    <linearGradient id="clipGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#e5e7eb"/>
      <stop offset="100%" stop-color="#cbd5e1"/>
    </linearGradient>
  </defs>

  <rect x="0" y="0" width="900" height="900" fill="url(#bgGrad)"/>

  <g id="card" transform="translate(60,60)">
    <rect class="card" x="0" y="0" rx="22" ry="22" width="780" height="780"/>
    <text class="subtitle" x="28" y="48">MAGNETISM â€¢ SORTING</text>
    <text class="title" x="28" y="88">Magnetic Material Sorting</text>
    <text class="helper" x="28" y="118">Drag each item into the correct box.</text>

    <g id="btn-reset" class="btn" transform="translate(620,28)" tabindex="0" role="button">
      <rect x="0" y="0" rx="24" ry="24" width="132" height="40"/>
      <text x="66" y="26" text-anchor="middle">RESET</text>
    </g>

    <g id="zones">
      <g id="drop-magnetic" class="zone" data-zone="magnetic" transform="translate(50,160)">
        <rect x="0" y="0" rx="18" ry="18" width="340" height="380"/>
        <text class="zone-label" x="20" y="28">MAGNETIC</text>
      </g>
      <g id="drop-nonmagnetic" class="zone" data-zone="nonmagnetic" transform="translate(390,160)">
        <rect x="0" y="0" rx="18" ry="18" width="340" height="380"/>
        <text class="zone-label" x="20" y="28">NON-MAGNETIC</text>
      </g>
    </g>

    <text class="hint" x="28" y="564">Tip: Paperclips and magnets are magnetic. Coins and plastic toys are not.</text>

    <g id="items" transform="translate(0,0)">
      <g id="item-paperclip" class="draggable" data-kind="magnetic" transform="translate(120,610)">
        <rect x="-4" y="-4" width="108" height="108" rx="16" ry="16" fill="rgba(255,255,255,0.02)" stroke="rgba(148,163,184,0.12)"/>
        <g transform="translate(0,0)">
          <path d="M36,34
                   q14,-14 28,0
                   v32
                   q0,18 -18,18
                   h-6
                   q-18,0 -18,-18
                   v-38
                   q0,-18 18,-18
                   h12
                   q18,0 18,18
                   v38
                   q0,18 -18,18
                   h-6"
                fill="none" stroke="url(#clipGrad)" stroke-width="4.5" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
      </g>

      <g id="item-coin" class="draggable" data-kind="nonmagnetic" transform="translate(300,610)">
        <rect x="-4" y="-4" width="108" height="108" rx="16" ry="16" fill="rgba(255,255,255,0.02)" stroke="rgba(148,163,184,0.12)"/>
        <g transform="translate(0,0)">
          <circle cx="50" cy="50" r="36" fill="url(#coinGrad)" stroke="#e2e8f0" stroke-width="1.5"/>
          <circle cx="50" cy="50" r="26" fill="#64748b" opacity="0.5" stroke="#94a3b8" stroke-width="1"/>
          <path d="M38,50 h24" stroke="#e5e7eb" stroke-width="2" opacity="0.7"/>
          <path d="M45,42 h14" stroke="#e5e7eb" stroke-width="2" opacity="0.5"/>
          <path d="M45,58 h14" stroke="#e5e7eb" stroke-width="2" opacity="0.5"/>
        </g>
      </g>

      <g id="item-toy" class="draggable" data-kind="nonmagnetic" transform="translate(480,610)">
        <rect x="-4" y="-4" width="108" height="108" rx="16" ry="16" fill="rgba(255,255,255,0.02)" stroke="rgba(148,163,184,0.12)"/>
        <g transform="translate(0,0)">
          <rect x="16" y="48" width="68" height="36" rx="8" ry="8" fill="#6d28d9" stroke="#a78bfa" stroke-width="1"/>
          <rect x="16" y="40" width="68" height="16" rx="8" ry="8" fill="#7c3aed" stroke="#c4b5fd" stroke-width="1"/>
          <circle cx="28" cy="48" r="6" fill="#a78bfa"/>
          <circle cx="50" cy="48" r="6" fill="#a78bfa"/>
          <circle cx="72" cy="48" r="6" fill="#a78bfa"/>
        </g>
      </g>

      <g id="item-magnet" class="draggable" data-kind="magnetic" transform="translate(660,610)">
        <rect x="-4" y="-4" width="108" height="108" rx="16" ry="16" fill="rgba(255,255,255,0.02)" stroke="rgba(148,163,184,0.12)"/>
        <g transform="translate(0,0)">
          <rect x="18" y="42" width="64" height="24" rx="6" ry="6" fill="#1f2937" stroke="#334155" stroke-width="1"/>
          <rect x="18" y="42" width="32" height="24" rx="6" ry="6" fill="#ef4444"/>
          <rect x="50" y="42" width="32" height="24" rx="6" ry="6" fill="#3b82f6"/>
          <text x="34" y="58" fill="#ffffff" font-size="10" font-weight="700" text-anchor="middle">N</text>
          <text x="66" y="58" fill="#ffffff" font-size="10" font-weight="700" text-anchor="middle">S</text>
        </g>
      </g>
    </g>
  </g>
</svg>

<script>
(function(){
  const svg = document.querySelector('svg');

  const zones = {
    magnetic: {
      g: document.getElementById('drop-magnetic'),
      x: 60 + 50, // card offset + zone translate
      y: 60 + 160,
      w: 340,
      h: 380,
      count: 0
    },
    nonmagnetic: {
      g: document.getElementById('drop-nonmagnetic'),
      x: 60 + 390,
      y: 60 + 160,
      w: 340,
      h: 380,
      count: 0
    }
  };

  const items = Array.from(document.querySelectorAll('#items > g.draggable'));
  const resetBtn = document.getElementById('btn-reset');

  items.forEach((it, idx) => {
    const m = it.getAttribute('transform').match(/translate\(([-\d.]+),([-\d.]+)\)/);
    it.dataset.x = m ? parseFloat(m[1]) : 0;
    it.dataset.y = m ? parseFloat(m[2]) : 0;
    it.dataset.locked = 'false';
    it.dataset.scale = '1';
    it.style.setProperty('--x', it.dataset.x + 'px');
    it.style.setProperty('--y', it.dataset.y + 'px');
    makeDraggable(it);
  });

  function setTransform(el, x, y, scale=1) {
    el.setAttribute('transform', `translate(${x},${y}) scale(${scale})`);
    el.dataset.x = x;
    el.dataset.y = y;
    el.dataset.scale = scale;
    el.style.setProperty('--x', x + 'px');
    el.style.setProperty('--y', y + 'px');
  }

  function svgPoint(evt){
    const pt = svg.createSVGPoint();
    pt.x = evt.clientX;
    pt.y = evt.clientY;
    const res = pt.matrixTransform(svg.getScreenCTM().inverse());
    return res;
  }

  function inZone(p, zone) {
    return p.x >= zone.x && p.x <= zone.x + zone.w && p.y >= zone.y && p.y <= zone.y + zone.h;
  }

  function getPointerPos(evt){
    if (evt.touches && evt.touches[0]) {
      return {clientX: evt.touches[0].clientX, clientY: evt.touches[0].clientY};
    }
    return {clientX: evt.clientX, clientY: evt.clientY};
  }

  function highlightZones(p) {
    Object.values(zones).forEach(z => {
      const inside = inZone(p, z);
      z.g.classList.toggle('active', inside);
    });
  }

  function clearZoneHighlights() {
    Object.values(zones).forEach(z => z.g.classList.remove('active'));
  }

  function nextSlot(zoneKey) {
    const z = zones[zoneKey];
    const cols = 2;
    const slotW = 100;
    const slotH = 100;
    const gap = 24;
    const topPad = 54;
    const totalW = cols * slotW + (cols - 1) * gap;
    const startX = z.x + (z.w - totalW) / 2;
    const startY = z.y + topPad;
    const idx = z.count;
    const row = Math.floor(idx / cols);
    const col = idx % cols;
    return {
      x: startX + col * (slotW + gap),
      y: startY + row * (slotH + gap)
    };
  }

  function makeDraggable(el){
    let dragging = false;
    let pointerId = null;
    let start = {x:0, y:0};
    let offset = {x:0, y:0};

    el.addEventListener('pointerdown', (e) => {
      if (el.dataset.locked === 'true') return;
      dragging = true;
      pointerId = e.pointerId;
      el.setPointerCapture(pointerId);
      const p = svgPoint(e);
      start.x = parseFloat(el.dataset.x);
      start.y = parseFloat(el.dataset.y);
      offset.x = p.x - start.x;
      offset.y = p.y - start.y;
      el.classList.add('dragging');
      el.style.transition = 'transform 0s';
      highlightZones(p);
      el.parentNode.appendChild(el);
    });

    el.addEventListener('pointermove', (e) => {
      if (!dragging) return;
      const p = svgPoint(e);
      const nx = p.x - offset.x;
      const ny = p.y - offset.y;
      setTransform(el, nx, ny, 1.03);
      highlightZones(p);
    });

    el.addEventListener('pointerup', (e) => {
      if (!dragging) return;
      dragging = false;
      el.releasePointerCapture(pointerId);
      el.classList.remove('dragging');
      el.style.transition = 'transform 180ms ease';
      clearZoneHighlights();

      const p = svgPoint(e);
      let targetZone = null;
      if (inZone(p, zones.magnetic)) targetZone = 'magnetic';
      else if (inZone(p, zones.nonmagnetic)) targetZone = 'nonmagnetic';

      if (targetZone && zoneAccepts(el, targetZone)) {
        const z = zones[targetZone];
        const slot = nextSlot(targetZone);
        z.count += 1;
        setTransform(el, slot.x, slot.y, 1.06);
        el.dataset.locked = 'true';
        setTimeout(() => setTransform(el, slot.x, slot.y, 1), 160);
        el.classList.add('locked');
        flashZone(z.g, true);
        checkCompletion();
      } else {
        // wrong or outside
        const ox = parseFloat(el.dataset.x_initial || el.dataset.ox || getInit(el).x);
        const oy = parseFloat(el.dataset.y_initial || el.dataset.oy || getInit(el).y);
        const init = getInit(el);
        setTransform(el, init.x, init.y, 1);
        el.classList.add('badFlash');
        setTimeout(() => el.classList.remove('badFlash'), 280);
        flashZone(targetZone ? zones[targetZone].g : null, false);
      }
    });

    // remember original
    const init = getInit(el);
    el.dataset.ox = init.x;
    el.dataset.oy = init.y;
  }

  function getInit(el){
    // initial transform stored at first setup in dataset.x/y
    return {x: parseFloat(el.dataset.x), y: parseFloat(el.dataset.y)};
  }

  function zoneAccepts(el, zoneKey){
    const kind = el.dataset.kind;
    return (kind === 'magnetic' && zoneKey === 'magnetic') ||
           (kind === 'nonmagnetic' && zoneKey === 'nonmagnetic');
  }

  function flashZone(zoneG, success){
    if (!zoneG) return;
    zoneG.classList.add('active');
    if (success) {
      zoneG.classList.add('correctFlash');
      setTimeout(() => {
        zoneG.classList.remove('correctFlash');
        zoneG.classList.remove('active');
      }, 260);
    } else {
      setTimeout(() => zoneG.classList.remove('active'), 160);
    }
  }

  function checkCompletion(){
    const allLocked = items.every(i => i.dataset.locked === 'true');
    if (allLocked) {
      // subtle pulse on both zones to celebrate
      Object.values(zones).forEach(z => {
        z.g.classList.add('correctFlash');
        setTimeout(()=> z.g.classList.remove('correctFlash'), 420);
      });
    }
  }

  function resetGame(){
    // reset counts
    zones.magnetic.count = 0;
    zones.nonmagnetic.count = 0;
    items.forEach(it => {
      it.dataset.locked = 'false';
      it.classList.remove('locked');
      it.style.transition = 'transform 200ms ease';
      const init = {x: parseFloat(it.dataset.ox), y: parseFloat(it.dataset.oy)};
      setTransform(it, init.x, init.y, 1);
    });
  }

  // initialize initial positions as separate from current
  items.forEach(it => {
    const m = it.getAttribute('transform').match(/translate\(([-\d.]+),([-\d.]+)\)/);
    const x = m ? parseFloat(m[1]) : 0;
    const y = m ? parseFloat(m[2]) : 0;
    it.dataset.ox = x;
    it.dataset.oy = y;
  });

  resetBtn.addEventListener('click', resetGame);
  resetBtn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      resetGame();
    }
  });

})();
</script>
</body>
</html>